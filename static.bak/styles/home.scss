@import 'eris';

$black: #363636;
$green: $eris;
$grey: #efefef;
$brightgreen: $grey;
$footer: #272626;

body {
	background: $blue url(asset_path('bg.svg')) center;
	text-align: center;
}

img {
	max-width: 100%;
}

.video-wrap {
	position: relative;
	margin: 0 auto;
	padding-bottom: 55.5%;
	height: 0;
	border: 2px solid $grey;

 	iframe {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		border: 0;
	}
}

/* Backgrounds */
.bg-grey {
	background: $grey;
}

/* Icons */
.down  {
	display: inline-block;
	height: 56px;
	width: 56px;
	background: $green;
	background: url(asset_path('arrow.svg'));
	fill: $grey;
}

/* Typography */
h1, h2, h3, .h3 {
	font-weight: 600;
	text-transform: uppercase;
	line-height: 1.2em;
}

h1 {
	font-size: 3.33rem;
}

h2 {
	span {
		background: $black;
		color: $green;
		width: 1.2em;
		height: 1.2em;
		border-radius: 1.2em;
		padding: 0px 3px 6px 4px;
		text-align: center;
		display: inline-block;
	}
}

h3, .h3 {
	font-size: 1.7em;
	font-weight: 400;
}

.h3 {
	text-transform: none;
}

.col{
	box-sizing: border-box;
	z-index: 2;
	position: relative;
}

pre {
	box-sizing: border-box;
	position: relative;
	box-shadow: 8px 8px 0 0 #e4e4e4;
	border: 28px solid $white;
	line-height: 1.8;
	padding: 18px;
	user-select: text;
	text-align: left;
	white-space: pre-line;
	width: auto;
	max-width: 656px;
	overflow: visible;

	&:before {
	  box-sizing: border-box;
	  position: absolute;
	  display: block;
	  content: "";
	  height: 25px;
	  border-style: solid;
	  border-color: transparent;
	  border-width: 25px;
	  top: 0;
	  border-left-width: 0;
	  border-right-color: $white;
	  left: -3.2em;
	}
}

p {
  text-align: center;
  font-size: 1.5em;
  font-weight: 300;
}

a {
  color: $khacki;
}

a:hover {
  color: #694c2f;
  text-decoration: none;
}

code {
  color: #5d442a;
  background-color: #e4d4c4;
}

/* Layout */
.wrap, .split-screen .wrap {
	margin: 0 auto;
	max-width: 100%;
}

article {
	padding: 4.444rem 1rem;

	&.bg {
		padding: 0;
		overflow: hidden;

		img {
			display: block;
			margin: 0 auto;
		}
	}

	.wrap {
		max-width:1000px;
	}

	&.top-line {
		h2.home-intro {
		  padding-top: 1em;
		}

		p.strapline {
		  padding-top: 1.5em;
		  padding-bottom: 1.5em;
		}

		.tagline {
		  padding-top: 1.5em;
		}
	}

	.thinner {
	  margin: auto;
	  max-width: 685px;
	}

	&.step {
		h2 {
			font-size: 2.667rem;
			text-transform: none;
		}

		h2:after {
			  box-sizing: border-box;
			  display: block;
			  position: absolute;
			  margin-top: -2.4em;
			  right: 5em;
			  height: 118px;
			  width: 110px;
			  content: "";
			  background: transparent url(asset_path('speech_bubble.svg')) no-repeat;
		}

		p {
			margin: 0 0 10px 0;
		}

		.step-major {
			text-align: right;
			font-size: 1.8em;
			font-weight: 400;
		}

		.major-right{
			text-align: left;
		}

		.step-sub {
			font-size: 1.4em;
			display: block;
			max-width: 15em;
			text-align: left;
		}

		.sub-right {
		  float: right;
		  text-align: right;
		}

		.col:after{
		  -webkit-box-sizing: content-box;
		  -moz-box-sizing: content-box;
		  box-sizing: content-box;
		}
	}

	&:first-child{
		.wrap {
			max-width:685px;
		}
	}
}

.col-2 {
	width: 100%;
	overflow: hidden;
	margin: 0;
	padding: 0;

	.col {
		display: inline-block;
		width: 49%;
		vertical-align: top;
		min-width: 320px;

		.wrap {
			max-width: 312px;
		}
	}

}

.mainfooter {

	position: relative;
	z-index: 3;
	background: $footer;
	border-top:solid 3px $brightgreen;
	color: $white;
	padding-top:14px;

	.erislogo {
		position: absolute;
		top: -60px;
		left: 50%;
		margin-left:-78px;
		width: 156px;
	}

	ul {
		list-style:none;
		display: inline-block;
		vertical-align: top;
		margin:0 60px 0 40px;
		padding:0;
	}

	img {
		display: inline-block;
		vertical-align: top;
	}

	a {
		text-decoration: none;
		font-size: 1rem;
		color: $white;
		font-size: 14px;
	}

	.logolist {
		text-align: left;
	}

	.linklist {
		font-size: 10px;

		a {
			border:solid 1px $brightgreen;
			border-radius: 5px;
			width:260px;
			line-height: 32px;
			margin-bottom:10px;
			display: block;

			&.act-on-this {
				background: $brightgreen;
				color: $footer;
			}
		}
	}

	.erismascot {
		width: 212px;
		position: relative;
		top: -11px;
	}

	&:before{
	  content: "";
	  position: absolute;
	  top:-115px;
	  height: 112px;
	  left:0;right:0;
	  background: url(asset_path('footertop.png')) center top;
	}
}

ul.eris-components {
  padding-top: 3em;
}

/* Above Mobile */
@media (min-width: 780px) {
	.split-screen {
		background: transparent; /* override bg-grey class */

		.col {
			width: 60%;
			position: relative;
			min-height: 250px;
			box-sizing: border-box;
			padding: 4em 3.2em 4em 2em;
			min-width: 0;
			background: $grey;

			&:before {
			  box-sizing: border-box;
			  position: absolute;
			  top: 0;
			  display: block;
			  height: 100%;
			  content: "";
			  border-style: solid;
			  border-color: transparent;
			  border-width: 22px;
			}

			&:after{
				-webkit-box-sizing: content-box;
				-moz-box-sizing: content-box;
				box-sizing: content-box;
			}

			&:last-child {
				border-left: 28px solid $blue;

				&:before {
					border-left-width: 0;
	  			border-right-color: $grey;
	  			left: -22px;
				}

				&:after{
					content:"";
					display:block;
					height: 10px;
					width:10px;
					border:solid 5px $blue;
					background: $grey;
					border-radius: 50%;
					position: absolute;
					left:-36px;
					top:130px;
				}

				a.down {
					display: none;
				}
			}

			&:first-child {
				border-right: 22px solid $blue;
				margin-right: -5px;
				text-align: right;
				padding-right: 1em;
				padding-left: 1em;
				width:40%;

				&:before {
					border-right-width: 0;
	  			border-left-color: $grey;
	  			right: -22px;
				}
			}
		}
	}
}

/* Above tablet   */
@media (min-width: 920px) {
	.split-screen.reverse-split{
		.col {
			padding: 4em 3.2em 4em 2em;
			min-width: 0;

			&:before {
			  position: absolute;
			  top: 0;
			  display: block;
			  height: 100%;
			  border-style: solid;
			  border-color: transparent;
			  border-width: 22px;
			}

			&:first-child {
				border-left: 22px solid $blue;
				border-right:0;
				right:-60%;
				text-align: left;
				margin-left:0;
				margin-right:-5px;

				&:before {
					border-left-width: 0;
	  			border-right-color: $grey;
	  			left: -22px;
					right:auto;
				}

				span.down {
					display: none;
				}
			}

			&:last-child {
				left:-40%;
				border-right: 22px solid $blue;
				border-left: 0;
				margin-left: -5px;
				text-align: right;
				padding-right: 2em;
				padding-left: 1em;

				&:before {
					border-right-width: 0;
	  			border-left-color: $grey;
	  			right: -22px;
	  			left: auto;
				}

				&:after{
					display:block;
					height: 10px;
					width:10px;
					border:solid 5px $blue;
					background: $grey;
					border-radius: 50%;
					position: absolute;
					right:-34px;
					left:auto;
					top:130px;
				}
			}
		}

		pre {
			display: inline-block;
			width: 100%;

			&:before {
			  box-sizing: border-box;
			  position: absolute;
			  display: block;
			  content: "";
			  height: 25px;
			  border-style: solid;
			  border-color: transparent;
			  border-width: 25px;
			  top: 0;
			  border-right-width: 0;
			  border-left-color: $white;
			  right: -3.2em;
			  left:auto;
			}
		}

		h2:after {
		  left: 5em;
		  right: auto;
		}
	}

	.fallbackground{
		display: none !important;
	}

	//chessgrid
	$chessyunit: 78px;
	$chessxunit: 105px;

	@mixin cy($size) {
		top: $size * $chessyunit;
	}

	@mixin cx($size) {
		left: $size * $chessxunit;
	}

	.chessboard{
		height: 480px;
		position: relative;
		left:-60px;
		text-align: center;
		width: 0;
		margin: $chessyunit auto;
		z-index: 2;

		&.chessnoblocks{
			height: 750px;
		}

		.block{
			position: absolute;
			display:block;
			width:140px;
			height:182px;
			top:190px;
			left:30px;
			background-repeat: no-repeat;
			background-position: center;
			background-image: url(asset_path('block.svg'));
			background-size: 140px;
		}

		b{
			background-repeat: no-repeat;
			background-position: center;
			position: absolute;
			display:block;
			width:210px;
			height:190px;
			background-image: url(asset_path('tile-white.svg'));
			background-size: 210px;

			&:nth-of-type(16n+16),
			&:nth-of-type(16n+14),
			&:nth-of-type(16n+11),
			&:nth-of-type(16n+9),
			&:nth-of-type(16n+8),
			&:nth-of-type(16n+6),
			&:nth-of-type(16n+3),
			&:nth-of-type(16n+1){
				background-image: url(asset_path('tile-blue.svg'));
			}

			@for $i from -6 through 6{
			  &.x#{$i} { @include cx($i);}
			}

			@for $i from 0 through 6{
			  &.y#{$i} { @include cy($i);}
			}
		}

		.powercable{
			position: absolute;
			top:535px;
			left:50%;
			margin-left:-900px;
			display: block;
			max-width: 1000px;
		}
	}

	.clouds, .cubes, .typists{
		height: 0;
		width: 200px;
		margin: 0 auto;
		position: absolute;
		left: -100px;
		left: 50%;
		margin-left: -100px;

		img, b, div{
			position: absolute;
			display:block;
		}

		b{
			background-repeat:  no-repeat;
			background-size: 100px;
			width:100px;
			height:100px;
			&:nth-child(3n-2){transform: scale(1.3)}
			&:nth-child(3n-1){transform: scale(0.6)}
		}
	}

	.typists img, .typists div{
		background-image: none;
		display: block;
		height: auto;
		z-index: 9;

		&.typist{
			width: 175px;
		}

		&.block{
			width: 98px;
		}

		&.redsprite {
			background: url(asset_path('redsprite.png')) no-repeat;
			background-position: 0 0;
			transform: scale(-.5, .5);
			width: 338px;
			height: 514px;
			animation: redplay .8s steps(10) infinite;
		}

		&.purplesprite {
			background: url(asset_path('purplesprite.png')) no-repeat;
			background-position: 0 0;
			transform: scale(.5);
			width: 290px;
			height: 514px;
			animation: purpleplay .8s steps(10) infinite;
		}

		&.bluesprite {
			background: url(asset_path('bluesprite.png')) no-repeat;
			background-position: 0 0;
			transform: scale(.5);
			width: 290px;
			height: 514px;
			animation: blueplay .8s steps(10) infinite;
		}

		&.blacksprite {
			background: url(asset_path('blacksprite.png')) no-repeat;
			background-position: 0 0;
			transform: scale(.5);
			&.flip{transform: scale(-.5, .5);}
			width: 290px;
			height: 514px;
			animation: blackplay .8s steps(10) infinite;
		}
	}

	.flip {
    -moz-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: FlipH;
    -ms-filter: "FlipH";
	}

	.cubes{
		b{
			width:50px;
			height:100px;
			background: url(asset_path('cube.svg')) no-repeat;
			background-position: center;
			background-size: 50px;
			&:nth-child(3n-2){transform: scale(0.8)}
			&:nth-child(3n-1){transform: scale(0.5)}
		}
	}

	.clouds{
			span{
				position: relative;
				width: 100px;
				height: 100px;
				display: block;
				z-index: -1;
				background-image: url(asset_path('cloud.svg'));
				background-repeat:  no-repeat;
				background-size: 100px;
			}

			b{
			width:100px;
			height:100px;
			display: block;
				&:nth-child(3n-2){
					span{background-size: 80px;}
				}
				&:nth-child(3n-1){
					span{background-size: 60px;}
				}
			}
	}

	//maingrid
	$mainxunit: 68px;
	$mainyunit: 47px;

	@mixin y($size) {top: $size * $mainyunit;}
	@mixin x($size) {left: $size * $mainxunit;}

	@for $i from -12 through 12{
	  .x#{$i} { @include x($i);}
	}

	@for $i from 0 through 30{
	  .y#{$i} { @include y($i);}
	}

	.blocknest{
		$blocky: 84px; //verticle offset
		$blockxy: 47px; //vertical if also moving horizontal
		$blockx: 68px; //horizontal offset

		left:-25px;
		z-index: 1;
		height:900px; width:0; margin:0 auto; position:relative;

		b,i{
			position: absolute;
			display:block;
			width:140px;
			height:182px;
			background: url(asset_path('block.svg'));
			background-size: 140px;
			background-repeat: no-repeat;
			background-position: center;

			&.u{bottom:$blocky}
			&.ur{bottom:$blockxy;left:$blockx}
			&.dr{top:$blockxy;left:$blockx}
			&.d{top:$blocky}
			&.dl{top:$blockxy;right:$blockx}
			&.ul{bottom:$blockxy;right:$blockx}
		}

		&.biggernest{
			$blocky: 66px; //verticle offset
			$blockxy: 38px; //vertical if also moving horizontal
			$blockx: 54px; //horizontal offset
			left:-55px;
			height: 1070px;
			margin-top:-50px;

			b,i{
				position: absolute;
				display:block;
				width:110px;
				height:142px;
				background: url(asset_path('block.svg'));
				background-size: 110px;
				background-repeat: no-repeat;
				background-position: center;

				&.u{bottom:$blocky}
				&.ur{bottom:$blockxy;left:$blockx}
				&.dr{top:$blockxy;left:$blockx}
				&.d{top:$blocky}
				&.dl{top:$blockxy;right:$blockx}
				&.ul{bottom:$blockxy;right:$blockx}
			}

			.bluecubes i{
				background-image: url(asset_path('block-blue.svg'));
			}

			//missing background in design
			b.bluecubes{
				background: none
			}

			b.purplecubes, .purplecubes i{
				background-image: url(asset_path('block-purple.svg'));
			}

			b.redcubes, .redcubes i{
				background-image: url(asset_path('block-red.svg'));
				z-index: 3
			}

			b.greencubes, .greencubes i{
				background-image: url(asset_path('block-green.svg'));
				z-index: 2
			}
		}
	}
}

/* Tablet */
@media (max-width: 920px) {
	.split-screen {
		.col {
			box-sizing: border-box;
			width: 72%;

			&:first-child {
				width: 28%;
				text-align: left;
				//padding: 1rem; //breaks equal-heights

				h2 {
					font-size: 2.222rem;
				}
			}
		}
	}

	/* hide speech bubble, need to each step */
	article.step h2:after {
		display: none;
	}

	article.step .step-major {
		text-align: center;
	}

	.typists{
		display: none
	}

	.mainfooter{
		text-align: center;
		padding: 520px 0 20px;

		&:before{
			display: none;
		}

		.erislogo{
			display: none;
		}

		.erismascot{
			display: block;
			position: absolute;
			top: 15px;
			left: 50%;
			margin-left: -115px;
		}

		ul{
			display: block;
			margin: 20px auto;
			width: 230px;
		}

		.linklist{
			position: absolute;
			top: 270px;
			left: 50%;
			margin-left: -130px;
		}

		.logolist{
			columns: 90px 2;
      column-gap: 50px;
      width: 230px;

			li{
				break-inside: avoid;
			}
		}
	}

	article.bg img.powercable{
		display:none
	}

	article.step .col .highlight {
	  max-width: 80%;
	  margin-left: 10%;
	  text-align: center;
	}
}


/* Mobile */
@media (max-width: 781px) {
	body, html {
		font-size: 16px;
	}

	h1 {
		font-size: 2.5rem;
		margin: 0 0 2rem 0;
	}

	.small-hidden {
		display: none;
	}

	pre {
		overflow: auto;

		&:before {
			border-right-color: transparent;
		}
	}

	article {
		padding: 2.222rem 0;
	}

	article.step p.step-sub {
	  text-align: center;
	  margin: auto;
	  float: none;
	  padding-bottom: 1em;
	}
	article.step .col .highlight {
	  display: none;
	}

	.wrap {
		padding: 0 1rem;
	}

	.split-screen {
		.wrap {
			padding: 0;
		}

		.col {
			&:first-child {
				text-align: center;
				padding: 0;
			}

			.down {
				margin: 2rem 0;
			}
		}
	}

	article .wrap img {
		max-width: 230px;
	}

	.col-2 .col {
		min-width: 100%;
	}
}

@keyframes redplay {
    0% { background-position: 0; }
    100% { background-position: -3380px; }
}

@keyframes blueplay {
    0% { background-position: 0; }
    100% { background-position: -2900px; }
}

@keyframes purpleplay {
    0% { background-position: 0; }
    100% { background-position: -2900px; }
}

@keyframes blackplay {
    0% { background-position: 0; }
    100% { background-position: -2900px; }
}

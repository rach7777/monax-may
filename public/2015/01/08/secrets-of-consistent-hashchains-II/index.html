<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Article">
  <head>
    
    <meta charset='utf-8'>
    <title>
        
            Monax Industries
        
    </title>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="http://localhost/images/favicon.ico">

    

  




  <meta property="og:type" content="website" />
  <meta property="og:url" content="http://localhost" />
  <meta property="og:title" content="Monax Industries" />


  <meta property="og:description" content="A blockchain is a silly sort of a datastructure designed to keep thousands of computers in sync while providing a useful service that is not controlled or owned by anyone in particular. Read more of Part 2 of Ethan&#39;s blockchain tome here." />





    <meta name="twitter:card" content="summary" />

<meta name="twitter:site" content="@eris_ltd" />
<meta name="twitter:title" content="Monax Industries" />

  <meta name="twitter:title" content="Monax Industries" />


  <meta name="twitter:description" content="A blockchain is a silly sort of a datastructure designed to keep thousands of computers in sync while providing a useful service that is not controlled or owned by anyone in particular. Read more of Part 2 of Ethan&#39;s blockchain tome here." />



  <meta name="twitter:creator" content="@eris_ltd">



<meta name="keywords" content="blockchain,smart,contracts,data,driven,relationship,bft" />

  <meta itemprop="name" content="Monax Industries" />


  <meta name="description" content="A blockchain is a silly sort of a datastructure designed to keep thousands of computers in sync while providing a useful service that is not controlled or owned by anyone in particular. Read more of Part 2 of Ethan&#39;s blockchain tome here." />




    
    <link rel="stylesheet" type="text/css" href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' />
    
        <link rel="stylesheet" type="text/css" href='http://localhost/styles/eris.css' />
    

    
    
  </head>
<body>

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container-fluid col-xs-12 col-sm-12 col-med-8 col-med-offset-2 col-lg-8 col-lg-offset-2">
    <div class="navbar-header">
      <a class="navbar-brand page-scroll" href="https://monax.industries">{% image ei-logo-long-mobile.png alt="Eris Industries" %}</a>
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Components <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="https://monax.industries/components/eriscli">eris:cli</a></li>
            <li><a href="https://monax.industries/components/erisdb">eris:db</a></li>
            <li><a href="https://monax.industries/components/epm">eris:pm</a></li>
            <li><a href="https://monax.industries/components/erislegal">eris:legal</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="https://monax.industries/products/">Products <span class="caret"></span></a>
        </li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Documentation <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="https://docs.erisindustries.com">Overview</a></li>
            <li><a href="https://docs.erisindustries.com/tutorials/getting-started/">Get Started</a></li>
            <li><a href="https://docs.erisindustries.com/explainers">Explainers</a></li>
            <li><a href="https://docs.erisindustries.com/tutorials">Tutorials</a></li>
            <li><a href="https://docs.erisindustries.com/documentation">Technical Details</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="https://monax.industries/products/">Products <span class="caret"></span></a>
        </li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">About <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="https://monax.industries/about/team">Team</a></li>
            <li><a href="https://monax.industries/about/jobs">Positions</a></li>
            <li><a href="https://monax.industries/about/media">Media</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Connect <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="https://support.erisindustries.com" target="_blank"><i class="fa fa-ambulance"></i> Support Forums</a></li>
            <li><a href="https://slack.eris.industries"><i class="fa fa-weixin"></i> Chat Support (Slack)</a></li>
            <li><a href="mailto:contact@erisindustries.com"><i class="fa fa-envelope"></i> Business Contact Email</a></li>
            <li class="divider"></li>
            <li><a href="https://github.com/eris-ltd" target="_blank"><i class="fa fa-github-square"></i> Github</a></li>
            <li class="divider"></li>
            <li><a href="https://twitter.com/eris_ltd" target="_blank"><i class="fa fa-twitter-square"></i> Twitter</a></li>
            <li><a href="https://www.facebook.com/erisindustries" target="_blank"><i class="fa fa-facebook-square"></i> Facebook</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>


<div class="container-fluid" id="eris-page">
  
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2 page-header">
        <header><h1 class="title" role="title">Secrets of Consistent Hashchains II: History on Deposit</h1></header>
      </div>
    </div>
  

  <div class="row">
    <article id="main-content">
      <div class="col-xs-12 col-sm-12 col-md-10 col-md-offset-2 col-lg-6 col-lg-offset-4" id="content-block">
        

<h2 id="preface">Preface</h2>

<p>Some members of the community have (rightly) taken issue with my use of the term <code>eventual consistency</code>, as it has a well-defined formal meaning in computer science and I am abusing it here. However, as this is an informal expose and not a formal technical document, I will continue to abuse this term, since it has a semantic convenience that roughly expresses a proof-of-work blockchain&rsquo;s philosophy of history.</p>

<p>I also find it rolls off my fingers more elegantly than <code>strong probabilistic guarantee</code>.</p>

<h2 id="agreed-eventually">Agreed (Eventually)</h2>

<p>In a <a href="https://eng.erisindustries.com/blockchains/2014/12/22/secrets-of-consistent-hashchains-I/" target="_blank">previous post</a>, we explored the first secret of distributed hash chains: a consensus that hinges on proof-of-work gives you an eventually consistent history. Notwithstanding the obvious inefficiency and tremendous expense incurred by a perennial drive to do a useless computation as absolutely fast as possible, proof-of-work based systems are utterly impervious to what any sensible individual might consider a reasonable definition of history. That&rsquo;s what we mean by eventual it&rsquo;s a history written (or re-written) by whatever ends up being the most work, regardless of what <em>actually</em> happened.</p>

<p>In fact, what <em>actually</em> happened is exactly the matter at stake here. The whole point of a blockchain is to <strong>establish agreement on a canonical ordering of a set of transactions</strong>, on a timescale that is on the order of the expected network propagation delay, which as at least an order of magnitude or two greater than that of the transactions themselves.</p>

<p>Blockchains achieve this by assigning someone (possibly multiple people, if it is not well designed) every so often, by way of structured random lottery, to the task of deciding on the ordered set of transactions to appear in the next block, and employing a set of rules to allow others on the network to determine if the proposal is valid. At each step, the ideal is for the network to make an atomic decision about what happened next in history. Bitcoin is a first approximation to this process.</p>

<p>The <a href="http://www.blockstream.com/sidechains.pdf" target="_blank">Blockstream</a> team introduced the term <em>Dynamic Membership Multi-party Signature</em> (DMMS) to describe the cryptographic object resulting from the process of block creation and validation that is a blockchain (more specifically, its headers). Over time, participants in the network <em>sign</em> the history by solving a partial hash collision, effectively endorsing everything that came before it and adding a new set of entries to the history.</p>

<p>What this means is that a blockchain itself is really a kind of collective signature, whose membership (the signatory <code>in-group</code>) is sampled repeatedly from a fluctuating distribution of resources allocated in the network; or <em>a never ending computation in which a group of humans produces a cryptographically signed account of history</em>.</p>

<h2 id="from-forks-to-knives">From Forks to Knives</h2>

<h3 id="why-should-our-record-of-history-our-collective-signature-ever-be-re-written">Why should our record of history, our collective signature, ever be re-written?</h3>

<p>History changes all the time in the real world, whenever an accountant cooks the books, or $60 billion goes missing from a federal budget, or when a mistake is just simple human error. In a blockchain, history changes when a fork emerges and becomes longer than the original chain. So if we want to protect our collective history, we need to protect ourselves from forks.</p>

<p>In an ideal proof-of-work (PoW) system, embedded in an idealized socioeconomic circumstance, where every single internet enabled device might be able to participate at a proportionally equivalent level, we could possibly avoid malicious forks altogether. If we could embed proof of work at the very heart and fabric of the economy such that for all intents and purposes it was simply not possible to mount a 51% attack, then maybe PoW would work. Good luck figuring that one out! I suspect we&rsquo;re at least 50 years and a couple nanotechnology breakthroughs away from anything like that.</p>

<p><strong>In the meantime, cryptosystems are here now, complete trustlessness is a facade, and we&rsquo;re already dealing with an energy crisis we don&rsquo;t need digital money to create another one.</strong></p>

<h3 id="what-to-do">What to do?</h3>

<p>A key part of the problem, if you&rsquo;ll recall, is the lack of a secure proof-of-past. But there <em>were</em> computers online who experienced the past, the real history. If only there were some way for those computers who <em>saw</em> the <em>real</em> history to punish those who try to create competing histories.</p>

<p><strong>Cue, the knife.</strong></p>

<p>An essential principle in the design of successful cryptoeconomic protocols is to <em>be slightly fascist</em>. So the most natural thing to do, at least for a cryptoeconomist, and as <a href="https://blog.ethereum.org/2014/01/15/slasher-a-punitive-proof-of-stake-algorithm/" target="_blank">suggested first</a> by perhaps the <a href="https://blog.ethereum.org/author/vitalik-buterin/" target="_blank">world&rsquo;s best cryptoeconomist</a>, is to randomly select potential block signers, and allow them to participate in the DMMS only if they put up a security deposit and sign the new blocks with the key to that deposit. That way, if the signer ever signs off on a fork, anyone else can produce a proof that the key signed two competing blocks. So we can punish the signer by slashing his entire deposit, and incentivize the act of providing evidence by giving some of the slashed deposit to the witness. In the legal world, this is exactly how we incentivize whistleblowing litigation &ndash; which when you think of it is not unlike what we are trying to achieve in the cryptoeconomic realm. Such an approach, of slashing deposits and giving to the &ldquo;witness&rdquo;, is known as <em>Slasher</em>, and has begun to see <a href="https://blog.ethereum.org/2014/10/03/slasher-ghost-developments-proof-stake/" target="_blank">renewed interest</a>, including a recent implementation in the form of a new blockchain protocol, aptly named <a href="http://tendermint.com/" target="_blank">Tendermint</a>.</p>

<p>A PoW-based consensus system provides an <a href="https://socrates1024.s3.amazonaws.com/consensus.pdf" target="_blank">anonymous byzantine consensus with security derived from moderately hard puzzles</a>, as a function of its difficulty. If you can solve the puzzles faster, or can offer the computational power for solving the puzzles as a service that benefits from economies of scale, it&rsquo;s easy to see how the network&rsquo;s security can be compromised. On the other hand, a security-deposit-based consensus provides something more like semi-anonymous byzantine consensus with security derived from moderate wealth at stake, where an attack costs at least half as much as the total capital on deposit, since as soon as we detect a fork, we slash deposits of everyone who double signed. Half the capital on deposit can be much greater than the cost of controlling half the network&rsquo;s hashing power, provided the market cap of the chain is sufficiently high. As of writing, the <a href="http://www.coinometrics.com/bitcoin/brix" target="_blank">cost of attacking bitcoin</a> is around $500 million while its <a href="http://coinmarketcap.com/" target="_blank">market cap</a> is nearly 10 times higher.</p>

<h2 id="staking-out-history">Staking out History</h2>

<p>Consensus based on security deposits draws on an even earlier proposal known as proof-of-stake (PoS). In PoS, the number of times you get to participate in signing a block is proportional to the amount of coins (tokens, stamps, whatever the stake metric is) you have within the network. The problem with such a proof-of-stake system, however, is that it does not even offer eventual consistency in the event of a fork; everyone can still commit blocks on both chains, so there&rsquo;s no reason for one chain to win out over the other. Slasher solves this by punishing those who fork.</p>

<p>Critically, however, Slasher only works in the short term: once a security deposit is returned (it has to be returned, and fees paid upon it, otherwise no one will put it up in the first place), the signer has nothing at stake, so he cannot be punished by the protocol, and is thus free to go back and start a fork from before he had stake on deposit. Call it the long-range-nothing-at-stake attack (LRNSA); it is a fundamental, possibly insurmountable problem for proof-of-stake systems.</p>

<p>So how does this work? First, suppose everyone is online all the time (ridiculous, but work with me). We can simply make a rule that says: &ldquo;forks that start before the current deposit period are invalid.&rdquo; Since everyone is online, those who create short term forks will be slashed, while those who create longer term forks will be ignored. We can soften the rule by using what Vitalik calls <a href="https://blog.ethereum.org/2014/11/25/proof-stake-learned-love-weak-subjectivity/" target="_blank">expontential subjective scoring</a> instead, where the score of a fork according to a user decays exponentially in the difference between the height it starts at and the current blockchain height according to that user. This effectively stifles the LRNSA, <em>so long as</em> users come online at least as often as the length of a deposit period (which can be on the order of weeks or months, possibly years).</p>

<p>However, some might appreciate the freedom of being able to go offline for longer. In particular, as my <a href="https://twitter.com/leashless" target="_blank">crypto-grandma</a> put it while discussing proof-of-stake with <a href="https://twitter.com/VladZamfir" target="_blank">Vlad Zamfir</a> and I, &ldquo;If your currency breaks because the internet went down, you didn&rsquo;t do a good job.&rdquo;</p>

<p>For bitcoin, which remember is a pure PoW system, if the internet goes down, or is partitioned, we know what happens when it starts up again or the networks reconnect: whoever ends up with the longest branch is the winner.</p>

<p>Woopdee-doo for bitcoin.</p>

<p>In a stake-based system, however, there is much greater opportunity for mischief, and the possibility that the network consensus is forked &ndash; for good. In the meantime, <strong>the fucking internet went down</strong>, so there are clearly very serious issues that need to dealt with, by humans, almost certainly at an <a href="http://www.itnewsafrica.com/2012/02/east-africas-cut-internet-cable-causes-disruption/" target="_blank">engineering level</a>, probably at a <a href="http://techcrunch.com/2014/12/31/indian-government-censorsht/" target="_blank">political level</a>, and with any luck at a <a href="http://edition.cnn.com/2014/03/27/world/europe/turkey-youtube-blocked/" target="_blank">cultural level</a> too. So maybe if the internet goes down, we take a deep breath, put away the blockchains for a minute, deal with whatever ridiculous event has just transpired, and when we get back online, start talking to everyone and figure out where we all left off last.</p>

<p>I bet we&rsquo;d pull it off just fine.</p>

<p>If you don&rsquo;t think that sounds particularly promising, I don&rsquo;t blame you. Maybe proof-of-work is the only way to guarantee consensus in the face of the internet going down. Proof-of-work just works, if you will. But only because it doesn&rsquo;t care about <em>real</em> history, only whichever group of shmucks managed to do the most work. Maybe there&rsquo;s something better we haven&rsquo;t thought of.</p>

<p>In the meantime, this is fun, so lets continue with Slasher and Proof-of-stake :)</p>

<p>Even while the network is up, but new machines are joining it for the first time, or the first time in a very long time, it is a struggle to bring them up to date securely and trustlessly. If you&rsquo;ve been online sometime within the last deposit period, you find some peers and ask them for the current state, <em>and trust them because there is real money at stake</em> (this is what we mean by secure &ndash; you can calculate how much it would cost you to lie and to be lied to). This scenario works. <em>But</em>, if you have never been online (e.g., you have had no history of or reason to care about the history of this particular dataset), or you have not been online for multiple deposit periods, you have no such security.</p>

<h2 id="digital-history-of-an-analog-system">Digital History of an Analog System</h2>

<p>So this is where things get interesting, and where subjectivity, trusted third parties, <em>on boarding</em>, and out-of-band communication come to the forefront.</p>

<p>Remember our discussion of bitcoin forking from my previous post, and the out-of-band communication that was engaged to deal with it? It&rsquo;s <a href="https://github.com/bitcoin/bips/blob/master/bip-0050.mediawiki#what-went-right" target="_blank">impressive how much went right</a> with that.</p>

<p>So we need to embrace that capacity explicitly as part of our designs; we need to keep better metrics and statistics on our networks; regular broadcast feeds of those metrics on popular media outlets; standardized APIs for using and querying various sets of services to inform an agent&rsquo;s <a href="https://blog.ethereum.org/2014/11/25/proof-stake-learned-love-weak-subjectivity/" target="_blank">subjective role in consensus</a>; <a href="https://blog.conformal.com/the-bitcoin-consensus-red-herring/" target="_blank">running multiple versions of the software to defend against software bugs</a>. education, planning, and fire drills for maintaining resiliency and teaching others about how to respond in the event of a fork.</p>

<p>Real history &ndash; what <em>really</em> happened &ndash; is a building that is constantly on fire, and we need to work together to put the fire out.</p>

<blockquote>
<p>At the end of the day, a peer-to-peer (p2p) consensus network is a thermodynamic system evolving its state in the face of adversarial and entropic assailants, like malicious actors and inefficient computation.</p>
</blockquote>

<p>The production of heat by high speed hashing is one approach to maintaining the consistency of the state by generating sufficient entropy to thermodynamically justify the organized consensus.</p>

<p>The other approach is to embed additional sensory organs and computational elements into the design of the protocol, to make it smarter, more organized, and vitally (for us) more adaptive to its environment.</p>

<p>Feedback loops and adaptive organs can work toward offsetting the entropic demands of an organized cryptoeconomic system, engaging layers of processing and execution that descend more elegantly down the ladder of energy gradients than an ASIC ever could. Maybe that&rsquo;s more suited as a <a href="http://www.ler.esalq.usp.br/aulas/lce1302/life_as_a_manifestation.pdf" target="_blank">secret of consistent carbon chains</a> but what are these hashchains if not extensions of our collective biology?</p>

<p>Riiiight.</p>

<p>Finally, another approach to the long-range-nothing-at-stake problem, as suggested and endorsed enthusiastically by our dear Vlad Zamfir, is to have blockchains last only as long as their security deposit period. This becomes the kernel of a fascinating approach to multichain technology.</p>

      </div>
    </article>
  </div>
</div>

</div>
</div>
<footer>
  <p>Copyright &copy; 2014-2015 Eris Industries</p>
</footer>
</body>


<div id="toc" class="well col-md-4 col-sm-6">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#preface">Preface</a></li>
<li><a href="#agreed-eventually">Agreed (Eventually)</a></li>
<li><a href="#from-forks-to-knives">From Forks to Knives</a>
<ul>
<li><a href="#why-should-our-record-of-history-our-collective-signature-ever-be-re-written">Why should our record of history, our collective signature, ever be re-written?</a></li>
<li><a href="#what-to-do">What to do?</a></li>
</ul></li>
<li><a href="#staking-out-history">Staking out History</a></li>
<li><a href="#digital-history-of-an-analog-system">Digital History of an Analog System</a></li>
</ul></li>
</ul>
</nav>
</div>
<script type="text/javascript">
  var clicky_site_ids = clicky_site_ids || [];
  clicky_site_ids.push( 100753928 );
  (function() {
    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = '//static.clicky.com/js';
    ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild( s );
  })();
</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.clicky.com/100753928ns.gif" /></p></noscript>
</html>